(function(){"use strict";var e={7601:function(e,t,s){var a=s(2856),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("h1",[e._v("Othello AlphaZero")]),t("GameControls",{attrs:{"current-player":e.currentPlayer,"board-size":e.boardSize,"game-status":e.gameStatus,"pass-action":e.hasPassAction,"piece-counts":e.pieceCounts,"is-processing":e.isProcessing},on:{"new-game":e.startNewGame,"pass-turn":function(t){return e.handleHumanMove({action:"pass"})}}}),t("OthelloBoard",{attrs:{board:e.boardState,"board-size":e.boardSize,"legal-moves":e.legalMoves,"last-move":e.lastMove},on:{"move-made":e.handleHumanMove}}),t("div",{staticClass:"game-info"},[t("button",{staticClass:"undo-button",attrs:{disabled:e.isProcessing||e.historyLength<=1},on:{click:e.handleUndoMove}},[e._v(" ðŸ”™ æ‚”æ£‹ (Undo) ")])])],1)},i=[],o=(s(8111),s(7588),s(417)),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"othello-board-container"},[t("div",{staticClass:"coordinate-row"},[t("div",{staticClass:"empty-corner"}),e._l(e.boardSize,function(s){return t("div",{key:"col-coord-"+s,staticClass:"coordinate-cell"},[e._v(e._s(s-1))])})],2),t("div",{staticClass:"main-board-wrapper"},[t("div",{staticClass:"coordinate-col"},e._l(e.boardSize,function(s){return t("div",{key:"row-coord-"+s,staticClass:"coordinate-cell"},[e._v(e._s(s-1))])}),0),t("div",{staticClass:"board-grid",style:{gridTemplateColumns:`repeat(${e.boardSize}, 1fr)`}},e._l(e.boardSize*e.boardSize,function(s){return t("BoardSquare",{key:s,attrs:{piece:e.flatBoard[s-1],coords:e.indexToCoords(s-1),"is-legal-move":e.isLegal(e.indexToCoords(s-1)),"is-last-move":e.isLast(e.indexToCoords(s-1))},on:{"make-move":e.handleMove}})}),1)])])},l=[],c=(s(3579),function(){var e=this,t=e._self._c;return t("div",{class:["board-square",{"is-legal":e.isLegalMove,"last-move":e.isLastMove}],on:{click:e.handleMove}},[0!==e.piece?t("div",{class:["piece",e.pieceClass,{"flip-animate":e.shouldAnimate}],on:{animationend:e.onAnimationEnd}}):e._e(),e.isLegalMove?t("div",{staticClass:"hint-dot"}):e._e()])}),u=[],d={name:"BoardSquare",props:{piece:{type:Number,required:!0},isLegalMove:{type:Boolean,default:!1},isLastMove:{type:Boolean,default:!1},coords:{type:Object,required:!0}},data(){return{shouldAnimate:!1}},computed:{pieceClass(){return 1===this.piece?"white-piece":-1===this.piece?"black-piece":""}},watch:{piece(e,t){0!==t&&0!==e&&t!==e&&(this.shouldAnimate=!0)}},methods:{handleMove(){this.isLegalMove&&this.$emit("make-move",this.coords)},onAnimationEnd(){this.shouldAnimate=!1}}},h=d,p=s(1656),v=(0,p.A)(h,c,u,!1,null,"539c2cf9",null),m=v.exports,g={name:"OthelloBoard",components:{BoardSquare:m},props:{board:{type:Array,required:!0},boardSize:{type:Number,required:!0},legalMoves:{type:Array,default:()=>[]},lastMove:{type:Object,default:()=>null}},computed:{flatBoard(){return this.board.flat()}},methods:{indexToCoords(e){const t=Math.floor(e/this.boardSize),s=e%this.boardSize;return{x:t,y:s}},isLegal({x:e,y:t}){return this.legalMoves.some(s=>s.x===e&&s.y===t)},isLast({x:e,y:t}){return this.lastMove&&this.lastMove.x===e&&this.lastMove.y===t},handleMove(e){this.$emit("move-made",e)}}},f=g,y=(0,p.A)(f,n,l,!1,null,"13316132",null),b=y.exports,S=(s(1701),function(){var e=this,t=e._self._c;return t("div",{staticClass:"game-controls"},[t("div",{staticClass:"controls-group"},[t("label",{attrs:{for:"board-size"}},[e._v("Board Size:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedSize,expression:"selectedSize"}],attrs:{id:"board-size",disabled:e.isProcessing},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedSize=t.target.multiple?s:s[0]}}},e._l(e.availableSizes,function(s){return t("option",{key:s,domProps:{value:s}},[e._v(e._s(s)+"x"+e._s(s))])}),0),t("label",{attrs:{for:"first-player"}},[e._v("First Player:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedFirstPlayer,expression:"selectedFirstPlayer"}],attrs:{id:"first-player",disabled:e.isProcessing},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedFirstPlayer=t.target.multiple?s:s[0]}}},[t("option",{domProps:{value:1}},[e._v("Human (O)")]),t("option",{domProps:{value:-1}},[e._v("AI (X)")])]),t("button",{attrs:{disabled:e.isProcessing},on:{click:e.startNewGameClick}},[e._v("New Game")])]),t("div",{staticClass:"status-info"},[t("div",{staticClass:"turn-status"},[e._v(" Current Turn: "),t("span",{class:["player-indicator",-1===e.currentPlayer?"black-turn":"white-turn"]},[e._v(" "+e._s(e.currentPlayerText)+" ")])]),t("div",{staticClass:"score-display"},[t("p",{staticClass:"score white-score"},[e._v("White (O): "),t("strong",[e._v(e._s(e.pieceCounts.white))])]),t("p",{staticClass:"score black-score"},[e._v("Black (X): "),t("strong",[e._v(e._s(e.pieceCounts.black))])])]),t("p",{staticClass:"game-status"},[e._v("Status: "),t("span",[e._v(e._s(e.gameStatus))])]),e.passAction?t("button",{staticClass:"pass-button",attrs:{disabled:e.isProcessing},on:{click:function(t){return e.$emit("pass-turn")}}},[e._v(" Pass Turn (No Legal Moves) ")]):e._e()])])}),_=[],P={name:"GameControls",props:{currentPlayer:{type:Number,required:!0},boardSize:{type:Number,required:!0},gameStatus:{type:String,default:"Ongoing"},passAction:{type:Boolean,default:!1},pieceCounts:{type:Object,default:()=>({white:0,black:0})},isProcessing:{type:Boolean,default:!1}},data(){return{selectedSize:this.boardSize,availableSizes:[8],selectedFirstPlayer:1}},computed:{currentPlayerText(){return 1===this.currentPlayer?"Human (O)":"AI (X)"}},watch:{boardSize(e){this.selectedSize=e}},methods:{startNewGameClick(){this.$emit("new-game",{size:this.selectedSize,firstPlayer:this.selectedFirstPlayer})}}},C=P,w=(0,p.A)(C,S,_,!1,null,"d59eae56",null),M=w.exports;const z="https://sodastar-othello-alphazero-docker.hf.space/api/game",A=.4;function O(e){return new Promise(t=>setTimeout(t,1e3*e))}var k={name:"App",components:{OthelloBoard:b,GameControls:M},data(){return{boardSize:8,boardState:[],currentPlayer:1,legalMoves:[],lastMove:null,gameStatus:"Initializing",isProcessing:!1,historyLength:1}},computed:{hasPassAction(){return 0===this.legalMoves.length&&"Ongoing"===this.gameStatus&&1===this.currentPlayer},pieceCounts(){let e=0,t=0;this.boardState&&this.boardState.length>0&&this.boardState.forEach(s=>{s.forEach(s=>{1===s?e++:-1===s&&t++})});const s=this.boardSize*this.boardSize,a=s-e-t;return{white:e,black:t,empty:a}}},mounted(){this.startNewGame({size:this.boardSize,firstPlayer:1})},methods:{async handleUndoMove(){if(!(this.isProcessing||this.historyLength<=1)){this.isProcessing=!0,this.gameStatus="Undoing Move...";try{const e=await o.A.post(`${z}/undo_move`);this.updateGameState(e.data),"Ongoing"===this.gameStatus&&-1===this.currentPlayer?this.handleAIMove():this.isProcessing=!1}catch(e){console.error("Error undoing move:",e.response?e.response.data:e),this.gameStatus="Error during Undo",this.isProcessing=!1}}},async startNewGame(e){if(this.isProcessing)return;this.isProcessing=!0;const{size:t,firstPlayer:s}=e;this.gameStatus=`Starting ${t}x${t} game...`,this.boardSize=t;try{const e=await o.A.post(`${z}/new`,{size:t,first_player:s});this.updateGameState(e.data),this.historyLength=e.data.history_length||1}catch(a){console.error("Error starting new game:",a.response?a.response.data:a),this.gameStatus="Error: Cannot connect to Python Backend (check terminal)"}finally{1===this.currentPlayer&&(this.isProcessing=!1)}},async handleAIMove(){if("Ongoing"===this.gameStatus&&-1===this.currentPlayer){this.isProcessing=!0,this.gameStatus="AI is thinking...";try{const e=await o.A.post(`${z}/ai_move`);this.updateGameState(e.data),await O(A)}catch(e){console.error("Error handling AI move:",e.response?e.response.data:e),this.gameStatus="Error during AI move"}finally{this.isProcessing=!1,"Ongoing"===this.gameStatus&&-1===this.currentPlayer&&this.handleAIMove()}}},async handleHumanMove(e){if("Ongoing"!==this.gameStatus||1!==this.currentPlayer||this.isProcessing)return;const{x:t,y:s,action:a}=e;this.isProcessing=!0,this.gameStatus="Processing Move...";try{const e=await o.A.post(`${z}/human_move`,{x:t,y:s,action:a});this.updateGameState(e.data),await O(A),"Ongoing"===this.gameStatus&&-1===this.currentPlayer?this.handleAIMove():this.isProcessing=!1}catch(r){console.error("Error handling human move:",r.response?r.response.data:r),this.gameStatus="Error during human move",this.isProcessing=!1}},updateGameState(e){this.boardState=e.board,this.legalMoves=e.legal_moves,this.currentPlayer=e.current_player,this.lastMove=e.last_move,this.gameStatus=e.status,void 0!==e.history_length&&(this.historyLength=e.history_length),"Ongoing"!==this.gameStatus||-1!==this.currentPlayer||this.isProcessing||(this.gameStatus="AI is thinking...")}}},x=k,L=(0,p.A)(x,r,i,!1,null,null,null),B=L.exports;a.Ay.config.productionTip=!1,new a.Ay({render:e=>e(B)}).$mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,i){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],i=e[u][2];for(var n=!0,l=0;l<a.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every(function(e){return s.O[e](a[l])})?a.splice(l--,1):(n=!1,i<o&&(o=i));if(n){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[a,r,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,i,o=a[0],n=a[1],l=a[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(l)var u=l(s)}for(t&&t(a);c<o.length;c++)i=o[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(u)},a=self["webpackChunkothello_frontend"]=self["webpackChunkothello_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(7601)});a=s.O(a)})();
//# sourceMappingURL=app.28ba206e.js.map